{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SUGGESTED_EVALUATE = exports.DEFAULT_ESCAPE = exports.DEFAULT_INTERPOLATE = undefined;\n\nvar _lodash = require(\"lodash.template\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _merge = require(\"./merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n} // Default lodash templates regexs\n// https://regex101.com/r/ce27tA/5\n\n\nvar DEFAULT_INTERPOLATE = exports.DEFAULT_INTERPOLATE = /{{{([^{}#][\\s\\S]+?)}}}/g; // https://regex101.com/r/8sRC8b/8\n\nvar DEFAULT_ESCAPE = exports.DEFAULT_ESCAPE = /{{([^{}#][\\s\\S]+?)}}/g; // https://regex101.com/r/ndDqxg/4\n\nvar SUGGESTED_EVALUATE = exports.SUGGESTED_EVALUATE = /{{#([^{}].*?)}}/g;\n\nvar MessageBox = /*#__PURE__*/function () {\n  function MessageBox() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        escape = _ref.escape,\n        evaluate = _ref.evaluate,\n        initialLanguage = _ref.initialLanguage,\n        interpolate = _ref.interpolate,\n        messages = _ref.messages,\n        tracker = _ref.tracker;\n\n    _classCallCheck(this, MessageBox);\n\n    this.language = initialLanguage || MessageBox.language || 'en';\n    this.messageList = messages || {};\n\n    if (tracker) {\n      this.tracker = tracker;\n      this.trackerDep = new tracker.Dependency();\n    } // Template options\n\n\n    this.interpolate = interpolate || MessageBox.interpolate || DEFAULT_INTERPOLATE;\n    this.evaluate = evaluate || MessageBox.evaluate;\n    this.escape = escape || MessageBox.escape || DEFAULT_ESCAPE;\n  }\n\n  _createClass(MessageBox, [{\n    key: \"clone\",\n    value: function clone() {\n      var copy = new MessageBox({\n        escape: this.escape,\n        evaluate: this.evaluate,\n        initialLanguage: this.language,\n        interpolate: this.interpolate,\n        tracker: this.tracker\n      });\n      copy.messages(this.messageList);\n      return copy;\n    }\n  }, {\n    key: \"getMessages\",\n    value: function getMessages(language) {\n      if (!language) {\n        language = this.language;\n        if (this.trackerDep) this.trackerDep.depend();\n      }\n\n      var globalMessages = MessageBox.messages[language];\n      var messages = this.messageList[language];\n\n      if (messages) {\n        if (globalMessages) messages = (0, _merge2.default)({}, globalMessages, messages);\n      } else {\n        messages = globalMessages;\n      }\n\n      if (!messages) throw new Error(\"No messages found for language \\\"\".concat(language, \"\\\"\"));\n      return {\n        messages: messages,\n        language: language\n      };\n    }\n  }, {\n    key: \"message\",\n    value: function message(errorInfo) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          context = _ref2.context,\n          language = _ref2.language; // Error objects can optionally include a preformatted message,\n      // in which case we use that.\n\n\n      if (errorInfo.message) return errorInfo.message;\n      var fieldName = errorInfo.name;\n      var genericName = MessageBox.makeNameGeneric(fieldName);\n\n      var _this$getMessages = this.getMessages(language),\n          messages = _this$getMessages.messages;\n\n      var message = messages[errorInfo.type];\n\n      var fullContext = _objectSpread({\n        genericName: genericName\n      }, context, {}, errorInfo);\n\n      if (message && _typeof(message) === 'object') message = message[genericName] || message._default; // eslint-disable-line no-underscore-dangle\n\n      if (typeof message === 'string') {\n        message = (0, _lodash2.default)(message, {\n          interpolate: this.interpolate,\n          evaluate: this.evaluate,\n          escape: this.escape\n        });\n      }\n\n      if (typeof message !== 'function') return \"\".concat(fieldName, \" is invalid\");\n      return message(fullContext);\n    }\n  }, {\n    key: \"messages\",\n    value: function messages(_messages) {\n      (0, _merge2.default)(this.messageList, _messages);\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(language) {\n      this.language = language;\n      if (this.trackerDep) this.trackerDep.changed();\n    }\n  }], [{\n    key: \"makeNameGeneric\",\n    value: function makeNameGeneric(name) {\n      if (typeof name !== 'string') return null;\n      return name.replace(/\\.[0-9]+(?=\\.|$)/g, '.$');\n    }\n  }, {\n    key: \"defaults\",\n    value: function defaults() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          escape = _ref3.escape,\n          evaluate = _ref3.evaluate,\n          initialLanguage = _ref3.initialLanguage,\n          interpolate = _ref3.interpolate,\n          messages = _ref3.messages;\n\n      if (typeof initialLanguage === 'string') MessageBox.language = initialLanguage;\n      if (interpolate instanceof RegExp) MessageBox.interpolate = interpolate;\n      if (evaluate instanceof RegExp) MessageBox.evaluate = evaluate;\n      if (escape instanceof RegExp) MessageBox.escape = escape;\n\n      if (messages) {\n        if (!MessageBox.messages) MessageBox.messages = {};\n        (0, _merge2.default)(MessageBox.messages, messages);\n      }\n    }\n  }]);\n\n  return MessageBox;\n}();\n\n_defineProperty(MessageBox, \"messages\", {});\n\nexports.default = MessageBox;","map":{"version":3,"sources":["/Users/rjgleave/mysrc/oneq-work/sa-form/node_modules/message-box/dist/MessageBox.js"],"names":["Object","defineProperty","exports","value","SUGGESTED_EVALUATE","DEFAULT_ESCAPE","DEFAULT_INTERPOLATE","undefined","_lodash","require","_lodash2","_interopRequireDefault","_merge","_merge2","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","length","source","forEach","key","_defineProperty","getOwnPropertyDescriptors","defineProperties","_classCallCheck","instance","Constructor","TypeError","_defineProperties","props","descriptor","configurable","writable","_createClass","protoProps","staticProps","MessageBox","_ref","escape","evaluate","initialLanguage","interpolate","messages","tracker","language","messageList","trackerDep","Dependency","clone","copy","getMessages","depend","globalMessages","Error","concat","message","errorInfo","_ref2","context","fieldName","name","genericName","makeNameGeneric","_this$getMessages","type","fullContext","_default","_messages","setLanguage","changed","replace","defaults","_ref3","RegExp"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SUGGESTED_EVALUATE = exports.DEFAULT_ESCAPE = exports.DEFAULT_INTERPOLATE = undefined;\n\nvar _lodash = require(\"lodash.template\");\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _merge = require(\"./merge\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n// Default lodash templates regexs\n// https://regex101.com/r/ce27tA/5\nvar DEFAULT_INTERPOLATE = exports.DEFAULT_INTERPOLATE = /{{{([^{}#][\\s\\S]+?)}}}/g; // https://regex101.com/r/8sRC8b/8\n\nvar DEFAULT_ESCAPE = exports.DEFAULT_ESCAPE = /{{([^{}#][\\s\\S]+?)}}/g; // https://regex101.com/r/ndDqxg/4\n\nvar SUGGESTED_EVALUATE = exports.SUGGESTED_EVALUATE = /{{#([^{}].*?)}}/g;\n\nvar MessageBox = /*#__PURE__*/function () {\n  function MessageBox() {\n    var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n        escape = _ref.escape,\n        evaluate = _ref.evaluate,\n        initialLanguage = _ref.initialLanguage,\n        interpolate = _ref.interpolate,\n        messages = _ref.messages,\n        tracker = _ref.tracker;\n\n    _classCallCheck(this, MessageBox);\n\n    this.language = initialLanguage || MessageBox.language || 'en';\n    this.messageList = messages || {};\n\n    if (tracker) {\n      this.tracker = tracker;\n      this.trackerDep = new tracker.Dependency();\n    } // Template options\n\n\n    this.interpolate = interpolate || MessageBox.interpolate || DEFAULT_INTERPOLATE;\n    this.evaluate = evaluate || MessageBox.evaluate;\n    this.escape = escape || MessageBox.escape || DEFAULT_ESCAPE;\n  }\n\n  _createClass(MessageBox, [{\n    key: \"clone\",\n    value: function clone() {\n      var copy = new MessageBox({\n        escape: this.escape,\n        evaluate: this.evaluate,\n        initialLanguage: this.language,\n        interpolate: this.interpolate,\n        tracker: this.tracker\n      });\n      copy.messages(this.messageList);\n      return copy;\n    }\n  }, {\n    key: \"getMessages\",\n    value: function getMessages(language) {\n      if (!language) {\n        language = this.language;\n        if (this.trackerDep) this.trackerDep.depend();\n      }\n\n      var globalMessages = MessageBox.messages[language];\n      var messages = this.messageList[language];\n\n      if (messages) {\n        if (globalMessages) messages = (0, _merge2.default)({}, globalMessages, messages);\n      } else {\n        messages = globalMessages;\n      }\n\n      if (!messages) throw new Error(\"No messages found for language \\\"\".concat(language, \"\\\"\"));\n      return {\n        messages: messages,\n        language: language\n      };\n    }\n  }, {\n    key: \"message\",\n    value: function message(errorInfo) {\n      var _ref2 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n          context = _ref2.context,\n          language = _ref2.language;\n\n      // Error objects can optionally include a preformatted message,\n      // in which case we use that.\n      if (errorInfo.message) return errorInfo.message;\n      var fieldName = errorInfo.name;\n      var genericName = MessageBox.makeNameGeneric(fieldName);\n\n      var _this$getMessages = this.getMessages(language),\n          messages = _this$getMessages.messages;\n\n      var message = messages[errorInfo.type];\n\n      var fullContext = _objectSpread({\n        genericName: genericName\n      }, context, {}, errorInfo);\n\n      if (message && _typeof(message) === 'object') message = message[genericName] || message._default; // eslint-disable-line no-underscore-dangle\n\n      if (typeof message === 'string') {\n        message = (0, _lodash2.default)(message, {\n          interpolate: this.interpolate,\n          evaluate: this.evaluate,\n          escape: this.escape\n        });\n      }\n\n      if (typeof message !== 'function') return \"\".concat(fieldName, \" is invalid\");\n      return message(fullContext);\n    }\n  }, {\n    key: \"messages\",\n    value: function messages(_messages) {\n      (0, _merge2.default)(this.messageList, _messages);\n    }\n  }, {\n    key: \"setLanguage\",\n    value: function setLanguage(language) {\n      this.language = language;\n      if (this.trackerDep) this.trackerDep.changed();\n    }\n  }], [{\n    key: \"makeNameGeneric\",\n    value: function makeNameGeneric(name) {\n      if (typeof name !== 'string') return null;\n      return name.replace(/\\.[0-9]+(?=\\.|$)/g, '.$');\n    }\n  }, {\n    key: \"defaults\",\n    value: function defaults() {\n      var _ref3 = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n          escape = _ref3.escape,\n          evaluate = _ref3.evaluate,\n          initialLanguage = _ref3.initialLanguage,\n          interpolate = _ref3.interpolate,\n          messages = _ref3.messages;\n\n      if (typeof initialLanguage === 'string') MessageBox.language = initialLanguage;\n      if (interpolate instanceof RegExp) MessageBox.interpolate = interpolate;\n      if (evaluate instanceof RegExp) MessageBox.evaluate = evaluate;\n      if (escape instanceof RegExp) MessageBox.escape = escape;\n\n      if (messages) {\n        if (!MessageBox.messages) MessageBox.messages = {};\n        (0, _merge2.default)(MessageBox.messages, messages);\n      }\n    }\n  }]);\n\n  return MessageBox;\n}();\n\n_defineProperty(MessageBox, \"messages\", {});\n\nexports.default = MessageBox;"]},"metadata":{},"sourceType":"script"}